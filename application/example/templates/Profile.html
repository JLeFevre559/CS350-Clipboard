{% extends 'theme.html' %}


{% block title %}
Your Profile Page
{% endblock title %}


{% block content %}
<div>
    <img id="profileImage" src="{{ user.profile.profile_picture.url }}" alt="ProfilePicture" class="ProfileIcon">
</div>
<div>
    <ul class="profileList">
        <li>
            <b>Username:</b> {{ user.username }}
        <li>
            <b>Name:</b> {{ user.first_name }} {{ user.last_name }}
        </li>
        <li>
            <b>Email:</b> {{ user.email }}
        </li>
        <li>
            <b>Bio:</b> <p class="userBio">{{ user.bio }}<p>
        </li>        
    </ul>
    <div class="profile-div">
        <button  class="editButton">Edit Profile</button>
        <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="logoutButton">Logout</button>
        </form>
    </div>  
</div>

<script>
    var img = document.getElementById('profileImage');
    img.onload = function() {
        // Image loaded successfully
    };

    img.onerror = function() {
        var xhr = new XMLHttpRequest();
        xhr.open('HEAD', '../../static/images/noProfilePicturePic.png', true);
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                // The default image exists
                img.src = '../../static/images/noProfilePicturePic.png';
                img.alt = 'Profile Picture';
            } else {
                // The default image is also missing
                // Handle this case as needed
            }
            }
        };
    xhr.send();
    };
</script>
{% endblock content %}